// Talla/Edad - Percentiles OMS
// Unidad: cm
// Edad en: meses
// Fuente: Organización Mundial de la Salud

// Tipos de resultado para el diagnóstico de Talla/Edad
export type HeightForAgeDiagnosis =
  | "TALLA BAJA SEVERA"
  | "TALLA BAJA"
  | "NORMAL"
  | "ALTA";

// Interfaz para el resultado del diagnóstico
export interface HeightForAgeResult {
  diagnosis: HeightForAgeDiagnosis;
  percentile: string;
  zScore: string;
}

export const HEIGHT_FOR_AGE_PERCENTILES = {
  boys: {
    // meses: [P0.1(-3SD), P3(-2SD), P15(-1SD), P50(Median), P85(+1SD), P97(+2SD)]
    0: [44.2, 46.1, 48, 49.9, 51.8, 53.7],
    1: [48.9, 50.8, 52.8, 54.7, 56.7, 58.6],
    2: [52.4, 54.4, 56.4, 58.4, 60.4, 62.4],
    3: [55.3, 57.3, 59.4, 61.4, 63.5, 65.5],
    4: [57.6, 59.7, 61.8, 63.9, 66, 68],
    5: [59.6, 61.7, 63.8, 65.9, 68, 70.1],
    6: [61.2, 63.3, 65.5, 67.6, 69.8, 71.9],
    7: [62.7, 64.8, 67, 69.2, 71.3, 73.5],
    8: [64, 66.2, 68.4, 70.6, 72.8, 75],
    9: [65.2, 67.5, 69.7, 72, 74.2, 76.5],
    10: [66.4, 68.7, 71, 73.3, 75.6, 77.9],
    11: [67.6, 69.9, 72.2, 74.5, 76.9, 79.2],
    12: [68.6, 71, 73.4, 75.7, 78.1, 80.5],
    13: [69.6, 72.1, 74.5, 76.9, 79.3, 81.8],
    14: [70.6, 73.1, 75.6, 78, 80.5, 83],
    15: [71.6, 74.1, 76.6, 79.1, 81.7, 84.2],
    16: [72.5, 75, 77.6, 80.2, 82.8, 85.4],
    17: [73.3, 76, 78.6, 81.2, 83.9, 86.5],
    18: [74.2, 76.9, 79.6, 82.3, 85, 87.7],
    19: [75, 77.7, 80.5, 83.2, 86, 88.8],
    20: [75.8, 78.6, 81.4, 84.2, 87, 89.8],
    21: [76.5, 79.4, 82.3, 85.1, 88, 90.9],
    22: [77.2, 80.2, 83.1, 86, 89, 91.9],
    23: [78, 81, 83.9, 86.9, 89.9, 92.9],
    24: [78, 81.7, 84.8, 87.8, 90.9, 93.9],
    25: [78.6, 81.7, 84.9, 88, 91.1, 94.2],
    26: [79.3, 82.5, 85.6, 88.8, 92, 95.2],
    27: [79.9, 83.1, 86.4, 89.6, 92.9, 96.1],
    28: [80.5, 83.8, 87.1, 90.4, 93.7, 97],
    29: [81.1, 84.5, 87.8, 91.2, 94.5, 97.9],
    30: [81.7, 85.1, 88.5, 91.9, 95.3, 98.7],
    31: [82.3, 85.7, 89.2, 92.7, 96.1, 99.6],
    32: [82.8, 86.4, 89.9, 93.4, 96.9, 100.4],
    33: [83.4, 86.9, 90.5, 94.1, 97.6, 101.2],
    34: [83.9, 87.5, 91.1, 94.8, 98.4, 102],
    35: [84.4, 88.1, 91.8, 95.4, 99.1, 102.7],
    36: [85, 88.7, 92.4, 96.1, 99.8, 103.5],
    37: [85.5, 89.2, 93, 96.7, 100.5, 104.2],
    38: [86, 89.8, 93.6, 97.4, 101.2, 105],
    39: [86.5, 90.3, 94.2, 98, 101.8, 105.7],
    40: [87, 90.9, 94.7, 98.6, 102.5, 106.4],
    41: [87.5, 91.4, 95.3, 99.2, 103.2, 107.1],
    42: [88, 91.9, 95.9, 99.9, 103.8, 107.8],
    43: [88.4, 92.4, 96.4, 100.4, 104.5, 108.5],
    44: [88.9, 93, 97, 101, 105.1, 109.1],
    45: [89.4, 93.5, 97.5, 101.6, 105.7, 109.8],
    46: [89.8, 94, 98.1, 102.2, 106.3, 110.4],
    47: [90.3, 94.4, 98.6, 102.8, 106.9, 111.1],
    48: [90.7, 94.9, 99.1, 103.3, 107.5, 111.7],
    49: [91.2, 95.4, 99.7, 103.9, 108.1, 112.4],
    50: [91.6, 95.9, 100.2, 104.4, 108.7, 113],
    51: [92.1, 96.4, 100.7, 105, 109.3, 113.6],
    52: [92.5, 96.9, 101.2, 105.6, 109.9, 114.2],
    53: [93, 97.4, 101.7, 106.1, 110.5, 114.9],
    54: [93.4, 97.8, 102.3, 106.7, 111.1, 115.5],
    55: [93.9, 98.3, 102.8, 107.2, 111.7, 116.1],
    56: [94.3, 98.8, 103.3, 107.8, 112.3, 116.7],
    57: [94.7, 99.3, 103.8, 108.3, 112.8, 117.4],
    58: [95.2, 99.7, 104.3, 108.9, 113.4, 118],
    59: [95.6, 100.2, 104.8, 109.4, 114, 118.6],
    60: [null, 100.7, 105.3, 110, 114.6, 119.2],
    61: [null, 101.082, 105.673, 110.265, 114.856, 119.448],
    62: [null, 101.555, 106.178, 110.801, 115.423, 120.046],
    63: [null, 102.026, 106.68, 111.334, 115.988, 120.641],
    64: [null, 102.496, 107.18, 111.864, 116.547, 121.231],
    65: [null, 102.96, 107.675, 112.39, 117.104, 121.819],
    66: [null, 103.42, 108.165, 112.911, 117.657, 122.402],
    67: [null, 103.875, 108.652, 113.428, 118.204, 122.981],
    68: [null, 104.329, 109.135, 113.941, 118.747, 123.553],
    69: [null, 104.777, 109.613, 114.45, 119.287, 124.123],
    70: [null, 105.22, 110.088, 114.955, 119.822, 124.689],
    71: [null, 105.662, 110.558, 115.455, 120.351, 125.248],
    72: [null, 106.097, 111.024, 115.951, 120.878, 125.804],
    73: [null, 106.529, 111.486, 116.443, 121.4, 126.357],
    74: [null, 106.96, 111.946, 116.932, 121.919, 126.905],
    75: [null, 107.387, 112.403, 117.42, 122.436, 127.452],
    76: [null, 107.812, 112.858, 117.905, 122.951, 127.997],
    77: [null, 108.237, 113.313, 118.388, 123.463, 128.539],
    78: [null, 108.659, 113.765, 118.87, 123.975, 129.081],
    79: [null, 109.079, 114.215, 119.351, 124.486, 129.622],
    80: [null, 109.499, 114.664, 119.83, 124.996, 130.162],
    81: [null, 109.919, 115.114, 120.308, 125.503, 130.698],
    82: [null, 110.335, 115.56, 120.785, 126.01, 131.236],
    83: [null, 110.75, 116.005, 121.26, 126.516, 131.771],
    84: [null, 111.162, 116.448, 121.734, 127.019, 132.305],
    85: [null, 111.573, 116.889, 122.205, 127.521, 132.837],
    86: [null, 111.983, 117.329, 122.675, 128.021, 133.367],
    87: [null, 112.39, 117.766, 123.143, 128.519, 133.896],
    88: [null, 112.796, 118.203, 123.609, 129.016, 134.423],
    89: [null, 113.2, 118.637, 124.074, 129.511, 134.947],
    90: [null, 113.602, 119.069, 124.536, 130.003, 135.47],
    91: [null, 114.002, 119.499, 124.996, 130.494, 135.991],
    92: [null, 114.399, 119.927, 125.454, 130.982, 136.51],
    93: [null, 114.795, 120.353, 125.91, 131.468, 137.026],
    94: [null, 115.188, 120.776, 126.364, 131.952, 137.54],
    95: [null, 115.58, 121.198, 126.816, 132.434, 138.051],
    96: [null, 115.969, 121.617, 127.265, 132.913, 138.561],
    97: [null, 116.357, 122.035, 127.713, 133.391, 139.069],
    98: [null, 116.743, 122.451, 128.159, 133.867, 139.575],
    99: [null, 117.127, 122.865, 128.603, 134.342, 140.08],
    100: [null, 117.51, 123.278, 129.047, 134.815, 140.583],
    101: [null, 117.892, 123.69, 129.489, 135.287, 141.086],
    102: [null, 118.27, 124.1, 129.93, 135.76, 141.59],
    103: [null, 118.65, 124.51, 130.37, 136.231, 142.091],
    104: [null, 119.03, 124.92, 130.81, 136.701, 142.591],
    105: [null, 119.408, 125.329, 131.25, 137.17, 143.091],
    106: [null, 119.786, 125.737, 131.688, 137.639, 143.59],
    107: [null, 120.164, 126.146, 132.127, 138.108, 144.09],
    108: [null, 120.542, 126.553, 132.565, 138.577, 144.589],
    109: [null, 120.918, 126.961, 133.003, 139.045, 145.088],
    110: [null, 121.295, 127.368, 133.44, 139.513, 145.586],
    111: [null, 121.67, 127.774, 133.877, 139.98, 146.084],
    112: [null, 122.048, 128.18, 134.313, 140.446, 146.578],
    113: [null, 122.422, 128.585, 134.748, 140.912, 147.075],
    114: [null, 122.795, 128.989, 135.183, 141.377, 147.571],
    115: [null, 123.17, 129.393, 135.617, 141.84, 148.064],
    116: [null, 123.542, 129.796, 136.05, 142.304, 148.559],
    117: [null, 123.916, 130.199, 136.483, 142.767, 149.05],
    118: [null, 124.286, 130.601, 136.915, 143.23, 149.544],
    119: [null, 124.659, 131.003, 137.347, 143.691, 150.036],
    120: [null, 125.032, 131.406, 137.78, 144.153, 150.527],
    121: [null, 125.405, 131.809, 138.212, 144.615, 151.019],
    122: [null, 125.779, 132.212, 138.645, 145.078, 151.511],
    123: [null, 126.154, 132.617, 139.08, 145.543, 152.006],
    124: [null, 126.53, 133.023, 139.516, 146.009, 152.502],
    125: [null, 126.907, 133.431, 139.954, 146.477, 153.001],
    126: [null, 127.29, 133.843, 140.395, 146.947, 153.499],
    127: [null, 127.673, 134.256, 140.839, 147.422, 154.004],
    128: [null, 128.062, 134.674, 141.286, 147.898, 154.51],
    129: [null, 128.453, 135.095, 141.737, 148.379, 155.02],
    130: [null, 128.848, 135.52, 142.192, 148.863, 155.535],
    131: [null, 129.247, 135.948, 142.65, 149.352, 156.054],
    132: [null, 129.651, 136.382, 143.113, 149.843, 156.574],
    133: [null, 130.057, 136.818, 143.58, 150.341, 157.102],
    134: [null, 130.47, 137.261, 144.051, 150.842, 157.632],
    135: [null, 130.887, 137.707, 144.528, 151.348, 158.168],
    136: [null, 131.312, 138.161, 145.009, 151.858, 158.707],
    137: [null, 131.738, 138.617, 145.496, 152.375, 159.255],
    138: [null, 132.173, 139.081, 145.989, 152.897, 159.806],
    139: [null, 132.612, 139.55, 146.488, 153.425, 160.363],
    140: [null, 133.058, 140.025, 146.993, 153.96, 160.928],
    141: [null, 133.509, 140.507, 147.504, 154.502, 161.499],
    142: [null, 133.969, 140.996, 148.022, 155.049, 162.076],
    143: [null, 134.436, 141.492, 148.548, 155.604, 162.66],
    144: [null, 134.909, 141.995, 149.081, 156.167, 163.252],
    145: [null, 135.392, 142.507, 149.621, 156.736, 163.85],
    146: [null, 135.879, 143.024, 150.169, 157.314, 164.46],
    147: [null, 136.38, 143.553, 150.726, 157.899, 165.072],
    148: [null, 136.884, 144.087, 151.29, 158.493, 165.696],
    149: [null, 137.399, 144.631, 151.862, 159.094, 166.326],
    150: [null, 137.921, 145.182, 152.442, 159.703, 166.964],
    151: [null, 138.452, 145.741, 153.03, 160.319, 167.607],
    152: [null, 138.986, 146.305, 153.623, 160.942, 168.261],
    153: [null, 139.531, 146.877, 154.222, 161.568, 168.914],
    154: [null, 140.077, 147.451, 154.826, 162.2, 169.575],
    155: [null, 140.629, 148.031, 155.433, 162.835, 170.236],
    156: [null, 141.187, 148.615, 156.043, 163.47, 170.898],
    157: [null, 141.747, 149.2, 156.654, 164.107, 171.561],
    158: [null, 142.307, 149.786, 157.266, 164.746, 172.225],
    159: [null, 142.867, 150.372, 157.878, 165.383, 172.888],
    160: [null, 143.428, 150.957, 158.487, 166.017, 173.547],
    161: [null, 143.989, 151.542, 159.094, 166.646, 174.198],
    162: [null, 144.544, 152.12, 159.696, 167.272, 174.848],
    163: [null, 145.098, 152.696, 160.294, 167.892, 175.49],
    164: [null, 145.65, 153.268, 160.886, 168.504, 176.122],
    165: [null, 146.197, 153.834, 161.472, 169.11, 176.747],
    166: [null, 146.737, 154.394, 162.05, 169.707, 177.364],
    167: [null, 147.269, 154.945, 162.621, 170.296, 177.972],
    168: [null, 147.797, 155.489, 163.182, 170.874, 178.566],
    169: [null, 148.318, 156.025, 163.732, 171.439, 179.146],
    170: [null, 148.827, 156.549, 164.272, 171.994, 179.717],
    171: [null, 149.328, 157.064, 164.799, 172.535, 180.271],
    172: [null, 149.818, 157.566, 165.314, 173.063, 180.811],
    173: [null, 150.299, 158.058, 165.816, 173.575, 181.334],
    174: [null, 150.769, 158.537, 166.305, 174.073, 181.841],
    175: [null, 151.226, 159.003, 166.78, 174.557, 182.334],
    176: [null, 151.671, 159.456, 167.242, 175.027, 182.812],
    177: [null, 152.108, 159.899, 167.69, 175.481, 183.272],
    178: [null, 152.534, 160.33, 168.126, 175.921, 183.717],
    179: [null, 152.947, 160.748, 168.548, 176.349, 184.149],
    180: [null, 153.35, 161.154, 168.958, 176.762, 184.566],
    181: [null, 153.744, 161.549, 169.355, 177.16, 184.966],
    182: [null, 154.126, 161.933, 169.739, 177.545, 185.351],
    183: [null, 154.497, 162.304, 170.11, 177.916, 185.723],
    184: [null, 154.857, 162.662, 170.468, 178.274, 186.079],
    185: [null, 155.205, 163.009, 170.814, 178.618, 186.423],
    186: [null, 155.542, 163.344, 171.147, 178.949, 186.752],
    187: [null, 155.871, 163.67, 171.468, 179.266, 187.065],
    188: [null, 156.187, 163.982, 171.777, 179.573, 187.368],
    189: [null, 156.495, 164.285, 172.075, 179.865, 187.654],
    190: [null, 156.793, 164.577, 172.361, 180.144, 187.928],
    191: [null, 157.077, 164.856, 172.634, 180.413, 188.192],
    192: [null, 157.353, 165.125, 172.897, 180.668, 188.44],
    193: [null, 157.619, 165.383, 173.147, 180.911, 188.675],
    194: [null, 157.875, 165.63, 173.386, 181.141, 188.897],
    195: [null, 158.119, 165.866, 173.613, 181.359, 189.106],
    196: [null, 158.354, 166.091, 173.828, 181.565, 189.302],
    197: [null, 158.578, 166.305, 174.032, 181.759, 189.486],
    198: [null, 158.792, 166.509, 174.225, 181.942, 189.658],
    199: [null, 158.996, 166.702, 174.407, 182.112, 189.818],
    200: [null, 159.191, 166.885, 174.578, 182.272, 189.966],
    201: [null, 159.376, 167.058, 174.739, 182.421, 190.102],
    202: [null, 159.552, 167.221, 174.89, 182.559, 190.227],
    203: [null, 159.715, 167.373, 175.03, 182.688, 190.345],
    204: [null, 159.873, 167.517, 175.161, 182.805, 190.449],
    205: [null, 160.022, 167.652, 175.282, 182.912, 190.542],
    206: [null, 160.16, 167.778, 175.395, 183.013, 190.63],
    207: [null, 160.294, 167.897, 175.5, 183.102, 190.705],
    208: [null, 160.417, 168.007, 175.596, 183.185, 190.774],
    209: [null, 160.537, 168.111, 175.685, 183.259, 190.833],
    210: [null, 160.648, 168.207, 175.767, 183.327, 190.887],
    211: [null, 160.752, 168.298, 175.843, 183.389, 190.934],
    212: [null, 160.852, 168.382, 175.913, 183.444, 190.975],
    213: [null, 160.946, 168.462, 175.978, 183.494, 191.01],
    214: [null, 161.036, 168.537, 176.038, 183.539, 191.04],
    215: [null, 161.122, 168.608, 176.094, 183.579, 191.065],
    216: [null, 161.204, 168.675, 176.145, 183.615, 191.086],
    217: [null, 161.28, 168.736, 176.192, 183.649, 191.105],
    218: [null, 161.355, 168.796, 176.237, 183.678, 191.118],
    219: [null, 161.425, 168.851, 176.278, 183.704, 191.131],
    220: [null, 161.492, 168.904, 176.316, 183.729, 191.141],
    221: [null, 161.556, 168.954, 176.352, 183.75, 191.148],
    222: [null, 161.622, 169.003, 176.385, 183.767, 191.149],
    223: [null, 161.678, 169.047, 176.416, 183.785, 191.154],
    224: [null, 161.737, 169.091, 176.445, 183.8, 191.154],
    225: [null, 161.793, 169.133, 176.472, 183.812, 191.151],
    226: [null, 161.848, 169.173, 176.498, 183.822, 191.147],
    227: [null, 161.898, 169.21, 176.521, 183.833, 191.144],
    228: [null, 161.947, 169.245, 176.543, 183.841, 191.14],
  },
  girls: {
    // meses: [P0.1(-3SD), P3(-2SD), P15(-1SD), P50(Median), P85(+1SD), P97(+2SD)]
    0: [43.6, 45.4, 47.3, 49.1, 51, 52.9],
    1: [47.8, 49.8, 51.7, 53.7, 55.6, 57.6],
    2: [51, 53, 55, 57.1, 59.1, 61.1],
    3: [53.5, 55.6, 57.7, 59.8, 61.9, 64],
    4: [55.6, 57.8, 59.9, 62.1, 64.3, 66.4],
    5: [57.4, 59.6, 61.8, 64, 66.2, 68.5],
    6: [58.9, 61.2, 63.5, 65.7, 68, 70.3],
    7: [60.3, 62.7, 65, 67.3, 69.6, 71.9],
    8: [61.7, 64, 66.4, 68.7, 71.1, 73.5],
    9: [62.9, 65.3, 67.7, 70.1, 72.6, 75],
    10: [64.1, 66.5, 69, 71.5, 73.9, 76.4],
    11: [65.2, 67.7, 70.3, 72.8, 75.3, 77.8],
    12: [66.3, 68.9, 71.4, 74, 76.6, 79.2],
    13: [67.3, 70, 72.6, 75.2, 77.8, 80.5],
    14: [68.3, 71, 73.7, 76.4, 79.1, 81.7],
    15: [69.3, 72, 74.8, 77.5, 80.2, 83],
    16: [70.2, 73, 75.8, 78.6, 81.4, 84.2],
    17: [71.1, 74, 76.8, 79.7, 82.5, 85.4],
    18: [72, 74.9, 77.8, 80.7, 83.6, 86.5],
    19: [72.8, 75.8, 78.8, 81.7, 84.7, 87.6],
    20: [73.7, 76.7, 79.7, 82.7, 85.7, 88.7],
    21: [74.5, 77.5, 80.6, 83.7, 86.7, 89.8],
    22: [75.2, 78.4, 81.5, 84.6, 87.7, 90.8],
    23: [76, 79.2, 82.3, 85.5, 88.7, 91.9],
    24: [76, 80, 83.2, 86.4, 89.6, 92.9],
    25: [76.8, 80, 83.3, 86.6, 89.9, 93.1],
    26: [77.5, 80.8, 84.1, 87.4, 90.8, 94.1],
    27: [78.1, 81.5, 84.9, 88.3, 91.7, 95],
    28: [78.8, 82.2, 85.7, 89.1, 92.5, 96],
    29: [79.5, 82.9, 86.4, 89.9, 93.4, 96.9],
    30: [80.1, 83.6, 87.1, 90.7, 94.2, 97.7],
    31: [80.7, 84.3, 87.9, 91.4, 95, 98.6],
    32: [81.3, 84.9, 88.6, 92.2, 95.8, 99.4],
    33: [81.9, 85.6, 89.3, 92.9, 96.6, 100.3],
    34: [82.5, 86.2, 89.9, 93.6, 97.4, 101.1],
    35: [83.1, 86.8, 90.6, 94.4, 98.1, 101.9],
    36: [83.6, 87.4, 91.2, 95.1, 98.9, 102.7],
    37: [84.2, 88, 91.9, 95.7, 99.6, 103.4],
    38: [84.7, 88.6, 92.5, 96.4, 100.3, 104.2],
    39: [85.3, 89.2, 93.1, 97.1, 101, 105],
    40: [85.8, 89.8, 93.8, 97.7, 101.7, 105.7],
    41: [86.3, 90.4, 94.4, 98.4, 102.4, 106.4],
    42: [86.8, 90.9, 95, 99, 103.1, 107.2],
    43: [87.4, 91.5, 95.6, 99.7, 103.8, 107.9],
    44: [87.9, 92, 96.2, 100.3, 104.5, 108.6],
    45: [88.4, 92.5, 96.7, 100.9, 105.1, 109.3],
    46: [88.9, 93.1, 97.3, 101.5, 105.8, 110],
    47: [89.3, 93.6, 97.9, 102.1, 106.4, 110.7],
    48: [89.8, 94.1, 98.4, 102.7, 107, 111.3],
    49: [90.3, 94.6, 99, 103.3, 107.7, 112],
    50: [90.7, 95.1, 99.5, 103.9, 108.3, 112.7],
    51: [91.2, 95.6, 100.1, 104.5, 108.9, 113.3],
    52: [91.7, 96.1, 100.6, 105, 109.5, 114],
    53: [92.1, 96.6, 101.1, 105.6, 110.1, 114.6],
    54: [92.6, 97.1, 101.6, 106.2, 110.7, 115.2],
    55: [93, 97.6, 102.2, 106.7, 111.3, 115.9],
    56: [93.4, 98.1, 102.7, 107.3, 111.9, 116.5],
    57: [93.9, 98.5, 103.2, 107.8, 112.5, 117.1],
    58: [94.3, 99, 103.7, 108.4, 113, 117.7],
    59: [94.7, 99.5, 104.2, 108.9, 113.6, 118.3],
    60: [null, 99.9, 104.7, 109.4, 114.2, 118.9],
    61: [null, 100.055, 104.828, 109.602, 114.375, 119.148],
    62: [null, 100.514, 105.32, 110.126, 114.932, 119.738],
    63: [null, 100.968, 105.807, 110.645, 115.484, 120.322],
    64: [null, 101.418, 106.289, 111.16, 116.031, 120.902],
    65: [null, 101.865, 106.767, 111.67, 116.572, 121.474],
    66: [null, 102.306, 107.241, 112.175, 117.11, 122.044],
    67: [null, 102.745, 107.711, 112.677, 117.642, 122.608],
    68: [null, 103.181, 108.177, 113.174, 118.171, 123.167],
    69: [null, 103.612, 108.64, 113.667, 118.695, 123.722],
    70: [null, 104.04, 109.098, 114.156, 119.215, 124.273],
    71: [null, 104.464, 109.553, 114.642, 119.731, 124.82],
    72: [null, 104.885, 110.005, 115.124, 120.244, 125.364],
    73: [null, 105.306, 110.455, 115.604, 120.753, 125.902],
    74: [null, 105.724, 110.903, 116.081, 121.26, 126.438],
    75: [null, 106.139, 111.348, 116.557, 121.766, 126.975],
    76: [null, 106.557, 111.794, 117.031, 122.268, 127.505],
    77: [null, 106.971, 112.238, 117.504, 122.771, 128.037],
    78: [null, 107.385, 112.681, 117.977, 123.273, 128.569],
    79: [null, 107.8, 113.125, 118.449, 123.773, 129.097],
    80: [null, 108.213, 113.567, 118.921, 124.275, 129.628],
    81: [null, 108.628, 114.01, 119.393, 124.775, 130.157],
    82: [null, 109.043, 114.454, 119.865, 125.275, 130.686],
    83: [null, 109.459, 114.898, 120.337, 125.777, 131.216],
    84: [null, 109.877, 115.344, 120.81, 126.277, 131.744],
    85: [null, 110.294, 115.789, 121.284, 126.78, 132.275],
    86: [null, 110.713, 116.236, 121.759, 127.282, 132.805],
    87: [null, 111.13, 116.682, 122.234, 127.786, 133.338],
    88: [null, 111.551, 117.13, 122.71, 128.289, 133.869],
    89: [null, 111.974, 117.581, 123.187, 128.793, 134.399],
    90: [null, 112.396, 118.03, 123.665, 129.299, 134.933],
    91: [null, 112.819, 118.481, 124.144, 129.806, 135.468],
    92: [null, 113.245, 118.934, 124.623, 130.312, 136.002],
    93: [null, 113.672, 119.388, 125.104, 130.821, 136.537],
    94: [null, 114.101, 119.844, 125.587, 131.33, 137.073],
    95: [null, 114.53, 120.3, 126.071, 131.841, 137.611],
    96: [null, 114.961, 120.758, 126.556, 132.353, 138.151],
    97: [null, 115.393, 121.218, 127.042, 132.867, 138.692],
    98: [null, 115.828, 121.679, 127.53, 133.381, 139.233],
    99: [null, 116.265, 122.143, 128.02, 133.897, 139.775],
    100: [null, 116.703, 122.607, 128.511, 134.415, 140.318],
    101: [null, 117.143, 123.073, 129.004, 134.934, 140.864],
    102: [null, 117.584, 123.541, 129.498, 135.454, 141.411],
    103: [null, 118.029, 124.011, 129.993, 135.975, 141.958],
    104: [null, 118.475, 124.483, 130.49, 136.498, 142.506],
    105: [null, 118.92, 124.954, 130.989, 137.024, 143.058],
    106: [null, 119.371, 125.43, 131.49, 137.549, 143.608],
    107: [null, 119.822, 125.906, 131.991, 138.076, 144.161],
    108: [null, 120.273, 126.384, 132.494, 138.605, 144.716],
    109: [null, 120.728, 126.864, 132.999, 139.134, 145.269],
    110: [null, 121.185, 127.345, 133.505, 139.665, 145.824],
    111: [null, 121.643, 127.827, 134.012, 140.196, 146.381],
    112: [null, 122.101, 128.311, 134.52, 140.73, 146.939],
    113: [null, 122.564, 128.797, 135.03, 141.263, 147.496],
    114: [null, 123.025, 129.283, 135.541, 141.799, 148.057],
    115: [null, 123.49, 129.772, 136.053, 142.335, 148.616],
    116: [null, 123.959, 130.263, 136.567, 142.871, 149.175],
    117: [null, 124.427, 130.754, 137.082, 143.41, 149.738],
    118: [null, 124.896, 131.247, 137.599, 143.95, 150.302],
    119: [null, 125.369, 131.743, 138.117, 144.491, 150.865],
    120: [null, 125.843, 132.24, 138.636, 145.033, 151.43],
    121: [null, 126.322, 132.74, 139.158, 145.575, 151.993],
    122: [null, 126.799, 133.24, 139.68, 146.121, 152.562],
    123: [null, 127.281, 133.743, 140.205, 146.667, 153.129],
    124: [null, 127.764, 134.248, 140.731, 147.215, 153.698],
    125: [null, 128.249, 134.754, 141.259, 147.764, 154.269],
    126: [null, 128.736, 135.263, 141.789, 148.316, 154.842],
    127: [null, 129.227, 135.774, 142.321, 148.867, 155.414],
    128: [null, 129.719, 136.286, 142.853, 149.42, 155.987],
    129: [null, 130.213, 136.8, 143.387, 149.975, 156.562],
    130: [null, 130.707, 137.315, 143.922, 150.53, 157.137],
    131: [null, 131.202, 137.83, 144.458, 151.085, 157.713],
    132: [null, 131.7, 138.346, 144.993, 151.639, 158.286],
    133: [null, 132.198, 138.863, 145.528, 152.193, 158.858],
    134: [null, 132.695, 139.378, 146.062, 152.746, 159.43],
    135: [null, 133.193, 139.894, 146.595, 153.296, 159.997],
    136: [null, 133.688, 140.407, 147.126, 153.845, 160.565],
    137: [null, 134.183, 140.919, 147.655, 154.391, 161.127],
    138: [null, 134.675, 141.428, 148.18, 154.933, 161.686],
    139: [null, 135.164, 141.933, 148.702, 155.471, 162.24],
    140: [null, 135.653, 142.436, 149.22, 156.003, 162.787],
    141: [null, 136.134, 142.933, 149.732, 156.532, 163.331],
    142: [null, 136.612, 143.426, 150.239, 157.052, 163.866],
    143: [null, 137.085, 143.912, 150.739, 157.566, 164.393],
    144: [null, 137.552, 144.392, 151.233, 158.073, 164.913],
    145: [null, 138.015, 144.867, 151.718, 158.57, 165.421],
    146: [null, 138.467, 145.331, 152.195, 159.059, 165.923],
    147: [null, 138.914, 145.788, 152.663, 159.537, 166.412],
    148: [null, 139.349, 146.235, 153.121, 160.006, 166.892],
    149: [null, 139.777, 146.673, 153.568, 160.463, 167.358],
    150: [null, 140.196, 147.1, 154.004, 160.908, 167.812],
    151: [null, 140.605, 147.517, 154.429, 161.341, 168.253],
    152: [null, 141.006, 147.924, 154.842, 161.761, 168.679],
    153: [null, 141.393, 148.318, 155.244, 162.169, 169.095],
    154: [null, 141.769, 148.701, 155.633, 162.565, 169.497],
    155: [null, 142.138, 149.074, 156.01, 162.946, 169.883],
    156: [null, 142.492, 149.433, 156.375, 163.316, 170.258],
    157: [null, 142.838, 149.782, 156.727, 163.671, 170.616],
    158: [null, 143.172, 150.12, 157.067, 164.014, 170.961],
    159: [null, 143.496, 150.445, 157.394, 164.343, 171.291],
    160: [null, 143.805, 150.756, 157.708, 164.66, 171.612],
    161: [null, 144.105, 151.058, 158.01, 164.963, 171.915],
    162: [null, 144.395, 151.347, 158.3, 165.252, 172.205],
    163: [null, 144.673, 151.625, 158.577, 165.529, 172.481],
    164: [null, 144.941, 151.892, 158.842, 165.793, 172.744],
    165: [null, 145.194, 152.145, 159.096, 166.047, 172.998],
    166: [null, 145.441, 152.389, 159.338, 166.287, 173.236],
    167: [null, 145.677, 152.623, 159.569, 166.515, 173.461],
    168: [null, 145.903, 152.846, 159.789, 166.732, 173.675],
    169: [null, 146.12, 153.059, 159.998, 166.937, 173.877],
    170: [null, 146.324, 153.261, 160.197, 167.134, 174.07],
    171: [null, 146.522, 153.454, 160.386, 167.318, 174.249],
    172: [null, 146.711, 153.638, 160.564, 167.491, 174.418],
    173: [null, 146.888, 153.81, 160.733, 167.656, 174.579],
    174: [null, 147.059, 153.976, 160.893, 167.809, 174.726],
    175: [null, 147.219, 154.131, 161.043, 167.955, 174.867],
    176: [null, 147.374, 154.279, 161.184, 168.09, 174.995],
    177: [null, 147.518, 154.418, 161.318, 168.217, 175.117],
    178: [null, 147.655, 154.549, 161.442, 168.336, 175.23],
    179: [null, 147.785, 154.672, 161.56, 168.447, 175.334],
    180: [null, 147.911, 154.79, 161.669, 168.548, 175.427],
    181: [null, 148.028, 154.9, 161.772, 168.644, 175.516],
    182: [null, 148.138, 155.003, 161.867, 168.732, 175.597],
    183: [null, 148.239, 155.098, 161.956, 168.815, 175.674],
    184: [null, 148.337, 155.188, 162.039, 168.89, 175.741],
    185: [null, 148.431, 155.273, 162.116, 168.959, 175.802],
    186: [null, 148.519, 155.353, 162.188, 169.023, 175.857],
    187: [null, 148.599, 155.427, 162.254, 169.082, 175.91],
    188: [null, 148.678, 155.497, 162.315, 169.134, 175.953],
    189: [null, 148.749, 155.56, 162.372, 169.183, 175.995],
    190: [null, 148.816, 155.62, 162.424, 169.228, 176.032],
    191: [null, 148.883, 155.677, 162.472, 169.266, 176.061],
    192: [null, 148.942, 155.729, 162.516, 169.302, 176.089],
    193: [null, 148.999, 155.777, 162.556, 169.335, 176.113],
    194: [null, 149.053, 155.823, 162.593, 169.364, 176.134],
    195: [null, 149.103, 155.866, 162.628, 169.39, 176.152],
    196: [null, 149.152, 155.906, 162.659, 169.413, 176.167],
    197: [null, 149.196, 155.942, 162.689, 169.436, 176.182],
    198: [null, 149.24, 155.978, 162.716, 169.455, 176.193],
    199: [null, 149.28, 156.011, 162.742, 169.474, 176.205],
    200: [null, 149.322, 156.045, 162.767, 169.489, 176.212],
    201: [null, 149.36, 156.075, 162.79, 169.506, 176.221],
    202: [null, 149.4, 156.106, 162.813, 169.519, 176.225],
    203: [null, 149.436, 156.135, 162.834, 169.533, 176.232],
    204: [null, 149.471, 156.163, 162.854, 169.546, 176.238],
    205: [null, 149.506, 156.19, 162.874, 169.559, 176.243],
    206: [null, 149.539, 156.216, 162.894, 169.571, 176.248],
    207: [null, 149.573, 156.242, 162.912, 169.582, 176.251],
    208: [null, 149.606, 156.268, 162.93, 169.592, 176.254],
    209: [null, 149.638, 156.293, 162.948, 169.602, 176.257],
    210: [null, 149.667, 156.316, 162.965, 169.614, 176.263],
    211: [null, 149.699, 156.34, 162.982, 169.623, 176.265],
    212: [null, 149.727, 156.363, 162.998, 169.634, 176.27],
    213: [null, 149.758, 156.386, 163.014, 169.643, 176.271],
    214: [null, 149.785, 156.408, 163.03, 169.652, 176.275],
    215: [null, 149.812, 156.429, 163.045, 169.661, 176.278],
    216: [null, 149.842, 156.451, 163.06, 169.668, 176.277],
    217: [null, 149.868, 156.47, 163.073, 169.676, 176.279],
    218: [null, 149.893, 156.489, 163.086, 169.683, 176.28],
    219: [null, 149.917, 156.507, 163.098, 169.689, 176.28],
    220: [null, 149.94, 156.524, 163.109, 169.694, 176.279],
    221: [null, 149.959, 156.539, 163.119, 169.699, 176.28],
    222: [null, 149.98, 156.554, 163.128, 169.702, 176.276],
    223: [null, 150, 156.568, 163.136, 169.703, 176.271],
    224: [null, 150.015, 156.579, 163.142, 169.705, 176.268],
    225: [null, 150.033, 156.59, 163.147, 169.704, 176.261],
    226: [null, 150.047, 156.599, 163.151, 169.703, 176.255],
    227: [null, 150.062, 156.608, 163.153, 169.699, 176.245],
    228: [null, 150.073, 156.614, 163.155, 169.696, 176.237],
  },
};

/**
 * Calcula el diagnóstico nutricional de Talla/Edad según los percentiles de la OMS
 * @param height - Talla en centímetros
 * @param ageInMonths - Edad en meses (0-228)
 * @param gender - Género del paciente ("male" | "female")
 * @returns Resultado del diagnóstico con clasificación, percentil y Z-score
 */
export function calculateHeightForAge(
  height: number,
  ageInMonths: number,
  gender: "male" | "female"
): HeightForAgeResult {
  // Validar parámetros de entrada
  if (height <= 0 || ageInMonths < 0 || ageInMonths > 228) {
    return {
      diagnosis: "NORMAL",
      percentile: "No disponible",
      zScore: "No disponible",
    };
  }

  // Redondear la edad al mes más cercano
  const roundedAge = Math.round(ageInMonths);

  // Obtener los datos según el género
  const genderData =
    gender === "male"
      ? HEIGHT_FOR_AGE_PERCENTILES.boys
      : HEIGHT_FOR_AGE_PERCENTILES.girls;

  // Verificar si tenemos datos para esta edad
  if (!genderData[roundedAge as keyof typeof genderData]) {
    return {
      diagnosis: "NORMAL",
      percentile: "Edad fuera de rango",
      zScore: "No disponible",
    };
  }

  const percentiles = genderData[roundedAge as keyof typeof genderData];

  // Los percentiles están en el orden: [-3DE, -2DE, -1DE, Mediana(0DE), +1DE, +2DE]
  const [neg3DE, neg2DE, neg1DE, median, pos1DE, pos2DE] = percentiles;

  let diagnosis: HeightForAgeDiagnosis;
  let percentile: string;
  let zScore: string;

  // Manejar el caso donde -3DE es null (después del mes 59)
  if (neg3DE === null) {
    // Después del mes 59, solo tenemos 5 percentiles válidos (desde -2DE)
    // Verificar que los valores no sean null antes de usarlos
    if (
      neg2DE === null ||
      neg1DE === null ||
      pos1DE === null ||
      pos2DE === null
    ) {
      return {
        diagnosis: "NORMAL",
        percentile: "Datos incompletos",
        zScore: "No disponible",
      };
    }

    if (height <= neg2DE) {
      diagnosis = "TALLA BAJA SEVERA";
      percentile = "≤ -2DE";
      zScore = "≤ -2 DE";
    } else if (height > neg2DE && height <= pos2DE) {
      diagnosis = "NORMAL";
      percentile = "-2DE a +2DE";
      zScore = "-2 DE a +2 DE";
    } else {
      diagnosis = "ALTA";
      percentile = "> +2DE";
      zScore = "> +2 DE";
    }
  } else {
    // Antes del mes 59, tenemos todos los percentiles
    // Verificar que los valores no sean null antes de usarlos
    if (
      neg2DE === null ||
      neg1DE === null ||
      pos1DE === null ||
      pos2DE === null
    ) {
      return {
        diagnosis: "NORMAL",
        percentile: "Datos incompletos",
        zScore: "No disponible",
      };
    }

    if (height < neg3DE) {
      diagnosis = "TALLA BAJA SEVERA";
      percentile = "≤ -3DE";
      zScore = "≤ -3 DE";
    } else if (height >= neg3DE && height < neg2DE) {
      diagnosis = "TALLA BAJA";
      percentile = "-3DE a -2DE";
      zScore = "-3 DE a -2 DE";
    } else if (height >= neg2DE && height <= pos2DE) {
      diagnosis = "NORMAL";
      percentile = "-2DE a +2DE";
      zScore = "-2 DE a +2 DE";
    } else {
      diagnosis = "ALTA";
      percentile = "> +2DE";
      zScore = "> +2 DE";
    }
  }

  return {
    diagnosis,
    percentile,
    zScore,
  };
}
